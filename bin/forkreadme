#!/usr/bin/env ruby
# vim: et ts=2 sw=2

require "forkreadme"
require "trollop"

BANNER = <<EOT
Blah blah blah.
EOT

opts = Trollop::options do
  banner BANNER
  opt :path, "Path to the repo", :short=>"p", :default=>"."
  opt :pullstatus, "Include pullstat.us images", :short=>"i", :type=>:bool, :default=>true
end

begin
  dir = File.expand_path opts[:path], Dir.pwd
  puts ForkReadme::Generator.new(dir, opts[:pullstatus]).readme

rescue ForkReadme::Error => err
  $stderr.puts err
  exit false
end
